## 아이템 69. 예외는 진짜 예외 상황에만 사용하라

### 예외는 오직 예외 상황에서만 써야한다. 절대 일상적인 제어 흐름용으로 사용해선 안된다
<br>

일반적인 반복문 코드 - 표준 관용구
```java
for (Mountain m : range) {
    m.climb();
}
```
<br>

무한루프를 돌다가 배열 끝에 도달하면 예외를 발생시키고 끝내는 코드 - 문제있음!
```java
try {
    int i = 0;
    while(true) {
        range[i++].climb();
    }
} catch (ArrayIndexOutOfBoundsException e) { }
```
### 위와 같이 예외를 써서 루프를 종료한 이유는?
=> 코드는 예외를 이용하면 성능이 좋아질 것이라는 잘못된 추론으로 인해 만들어진 코드이다.

- 예외는 예외 상황에 쓸 용도로 설계되었으므로 JVM 구현자 입장에서는 최적화에 신경쓰지 않았을 확률이 높다.

- 코드를 try-catch 블록 안에 넣으면 JVM이 적용할 수 있는 최적화가 제한된다.

- 배열을 순회하는 표준 관용구는 앞서 걱정한 중복 검사를 수행하지 않는다. JVM이 알아서 최적화해서 없애준다.
  - 여기서 말한 중복검사는 JVM에서의 배열 경계 검사와 반복문에서 배열 경계 검사를 말한다.
<br>

#### 잘못된 예외 사용 시 문제점

- 표준 관용구를 사용 할 때보다 성능이 떨어진다.

- 버그를 숨겨 디버깅을 어렵게 만든다.
  - 예외를 사용한 반복문은 버그 때문에 발생한 엉뚱한 예외를 정상적인 반복문 종료 상황으로 오해하고 넘어간다   
  표준 관용구였다면 이 버그는 스레드를 즉각 종료시킬 것이다.
<br>

### 잘 설계된 API?

- 클라이언트가 정상적인 제어 흐름에서 예외를 사용할 일이 없게 해야 한다.
- '상태 의존적' 메소드를 제공하는 클래스는 '상태 검사' 메서드도 함께 제공해야 한다.  

Iterator 표준 관용구 사용
```java
for(Iterator<Foo> i = collection.iterator(); i.hashNext();) {
  Foo foo = i.next();
  ...
}
```
- `hasNext()` 상태 검사 메서드
- `next()` 상태 의존적 메서드
<br>

#### 만약 Iterator가 hasNext() 를 제공하지 않았다면?
=>그 일을 클라이언트가 대신해야 한다

```java
try {
  Iterator<Foo> i = collection.iterator();
  while(true) {
    Foo foo = i.next();
    ...
  }
} catch(NoSuchElementException e) { }
```
이 코드는 우리가 잘못되었다고 판단했던 예외를 사용한 반복문의 오류와 비슷한 상황이 된다
<br>

### 상태 검사 메서드 사용 외에 방법

1. 외부 동기화 없이 여러 스레드가 동시에 접근할 수 있거나 외부 요인으로 상태가 변할 수 있다면 옵셔널이나 null 같은 특정 값을 사용한다.
   - 상태 검사 메소드와 상태 의존적 메소드 호출 사이에 객체의 상태가 변할 수 있기 때문이다.
   
2. 성능이 중요한 상황에서 상태 검사 메서드가 상태 의존적 메소드의 작업 일부를 중복 수행한다면 옵셔널이나 null 같은 특정 값을 사용한다.

3. 그 외 다른 경우에는 상태 검사 메소드 를 사용하는 것이 낫다.
<br>

>다시 한번 정리하자면,  
예외는 예외 상황에서 쓸 의도로 설계되었으므로 제어 흐름에 사용해선 안된다.

<br></br>
## 아이템 70. 복구할 수 있는 상황에는 검사 예외를, 프로그래밍 오류에는 런타임 예외를 사용하라

<br></br>
## 아이템 71. 필요 없는 검사 예외 사용은 피하라

<br></br>
## 아이템 72. 표준 예외를 사용하라

<br></br>
## 아이템 73. 추상화 수준에 맞는 예외를 던지라

<br></br>
## 아이템 74. 메서드가 던지는 모든 예외를 문서화하라

<br></br>
## 아이템 75. 예외의 상세 메시지에 실패 관련 정보를 담으라

<br></br>
## 아이템 76. 가능한 한 실패 원자적으로 만들라

<br></br>
## 아이템 77. 예외를 무시하지 말라
