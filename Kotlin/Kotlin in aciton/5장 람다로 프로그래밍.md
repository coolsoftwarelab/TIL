## 5장 람다로 프로그래밍
>람다 식 또는 람다는 기본적으로 다른 함수에 넘길 수 있는 작은 코드 조각을 뜻함  
`{ x: Int, y: Int -> x + y }`


### 5.1 람다 식과 멤버 참조

#### 5.1.1 코드 블록을 함수 인자로 넘기기

일련의 동작을 변수에 저장하거나 다른 함수에 넘겨야하는 경우

- 자바의 무명 내부 클래스
```
button.setOnClickListener(new onClickListener() {
    @Override
    public void onClick(View  view) {
      // do something
    }
});
```

- 람다 사용
```
button.setOnClickListener { // do something }
```

**람다를 사용하면 간결하고 읽기 쉽다.**

#### 5.1.2 람다와 컬렉션
>컬렉션 라이브러리를 직접 구현보다는 코틀린 람다를 활용해라

람다사용 컬렉션 검색
```
val people = listOf(Person("Alice", 29), Person("Bob", 31))
people.maxBy { it.age } // 나이 프로퍼티 중 가장 큰 원소

// 참조 참조 방식
peple.maxBy(Person::age)
```

### 5.1.3 람다 식의 문법
>`{ x: Int, y: Int -> x + y }`  
항상 중괄호 사이에 위치. `->` 를 기준으로 파라미터와 본문을 구분함

람다 식을 변수에 저장
```
val sum = { x:Int, y:Int -> x + y }
println(sum(1,2))
```

람다 축약 표현

코틀린에서 함수 호출 시 맨 뒤에 있는 인자가 람다식이라면 그 람다를 괄호밖으로 빼낼 수 있다. 

```
// a.maxBy({ a: Number -> a.num }) 
a.maxBy() { a: Number -> a.num }
```

람다가 어떤 함수의 유일한 인자이고 람다의 파라미터가 하나이며 타입 추론이 가능한 경우 최대한 축약 가능
```
a.maxBy { it.num }  // 자동 생성된 파라미터 'it'
```
** it 을 남용하지 하지는 말라**

람다식은 함수이기에 변수에 할당 가능. 이 경우 타입 명시 필요
```
val getNum = {a:Number -> a.num}
people.maxBy(getNum)
```

본문이 여러 줄로 이뤄진 람다의 경우 본문의 맨 마지막에 있는 식이 람다의 결과 값이 된다.
```
val sum = { x: Int, y: Int ->
     println("Computing the sum of $x and $y...")
     x + y
}

print(sum(1, 2)

#### 5.1.4 현재 영역에 있는 변수에 접근

```
fun printMessagesWithPrefix(messages: Collection<String>, prefix: String) {
    messages.forEach {
        println("$prefix $it")
    }
}
```

**코틀린에서는 자바와 달리 람다 내부에서 외부의 변수에 접근 가능하며 람다안에서 바깥 변수를 변경이 가능하다 (클로저)**

```
fun printProblemCounts(responses: Collection<String>) {
    var clientErrors = 0  // 람다에서 사용할 변수 정의
    
    responses.forEach {
        if (it.startsWith("4")) {
            clientErrors++  // 람다 밖의 변수를 변경
        } else if (it.startsWith("5")) {
            // nothing...
        }
    }
}
```
람다 안에서 사용하는 외부변수를 `람다가 포획(capture)`한 변수라고 부른다.

#### 주의
>람다를 이벤트 핸들러나 다른 비동기적으로 실행되는 코드로 활용하는 경우  
함수 호출이 끝난 다음에 로컬 변수가 변경될 수 있는 경우 발생

항상 0을 리턴하는 함수
```
fun tryToCountButtonClicks(button:Button) : Int {
    var clicks = 0
    button.onClick{ clicks++ }
    return clicks
}
```

해결 : 카운터 변수를 클래스 프로퍼티나 전역 프로퍼티 등의 위치로 빼내야 한다.

### 5.1.5 멤버 참조
>이중콜론 사용 (::)을 사용하는 식을 멤버 참조라고 부른다.  
`Person::age` 클래스::멤버

최상위에 선언된 함수나 프로퍼티를 참조할 수도 있다.

```
fun salute() = println("Salute!")
>>run(::salute) // 최상위 함수 참조
```

람다 대신 멤버 참조 사용 예시
```
val action = {msg:String -> sendEmail(msg)   // sendEmail 함수에게 작업 위임
val nextAction = ::sendEmail  // 람다 대신 멤버 참조를 사용
```

이외에 생성자 참조와 확장 함수 참조가 있음

### 5.2 컬렉션 함수형 API




### 5.3 지연 계산(lazy) 컬렉션 연산
